

<section data-turbo="true" class="flex  w-full bg-gray-50">
  <div class="flex flex-col w-2/6 ">
    <div class="">
      <div class="flex justify-between items-center gap-5">
        <h2><strong>Channels</strong></h2>
        <%= link_to "Create Channel", new_channel_path %>
      </div>
      <ul class="flex flex-col gap-1 glass">


        <% @channels.each do |channel| %>
          <%= render '/channels/list_channel', local: { channel: channel}  %>
        <% end %>
      </ul>


    </div>

    <div class="divider"></div>

    <div class="">
      <% if current_user.channels.include?(@channel) %>

        <%= render '/messages/form', locals: { message: Message.new } %>

      <% else %>
        <div class="btn btn-primary w-full ">
          <%= link_to "Join #{@channel.name}", channel_channel_user_path(@channel), class: "", method: :post %>
        </div>
      <% end %>
    </div>

    <div class="divider"></div>
    <h2><strong>Users</strong></h2>
    <div class="flex justify-between items-center gap-5 mt-12">

      <div class="h-42 w-full overflow-hidden flex flex-wrap gap-3">
        <% @channel.users.each do |user| %>
          <div class="bg-indigo-300 hover:bg-purple-700 rounded-full inline-flex w-40 h-10 gap-5 align-center">
            <%= render 'shared/Components/avatar', content: { user: user, path: user_path(user.id) } %>
          </div>
        <% end %>
      </div>
    </div>

  </div>


  <div class="w-full overflow-y-scroll border-2 max-h-96 rounded-xl ml-5">
    <%== pagy_bootstrap_nav(@pagy) %>
    <div id="messages" class="">
      <%= render @messages %>
    </div>
  </div>
</section>

